{% extends "base.html" %}

{% block title %}{{ article.title }} :: {{ SITENAME }}{% endblock %}

{% block description %}{{ article.summary|striptags|truncate(160) }}{% endblock %}

{% block meta %}
<!-- Open Graph -->
<meta property="og:title" content="{{ article.title }}">
<meta property="og:description" content="{{ article.summary|striptags|truncate(160) }}">
<meta property="og:url" content="{{ SITEURL }}/{{ article.url }}">
<meta property="og:site_name" content="{{ SITENAME }}">
<meta property="og:locale" content="{{ DEFAULT_LANG }}">
<meta property="og:type" content="article">
<meta property="article:published_time" content="{{ article.date.isoformat() }}">
{% if article.tags %}
{% for tag in article.tags %}
<meta property="article:tag" content="{{ tag }}">
{% endfor %}
{% endif %}

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="{{ X_HANDLE }}">
<meta name="twitter:creator" content="{{ X_HANDLE }}">
<meta name="twitter:title" content="{{ article.title }}">
<meta name="twitter:description" content="{{ article.summary|striptags|truncate(160) }}">

<!-- Additional SEO -->
<meta name="author" content="{{ AUTHOR }}">
{% endblock %}

{% block canonical %}/{{ article.url }}{% endblock %}

{% block prefetch %}
<link rel="prefetch" href="{{ SITEURL }}/">
{% endblock %}

{% block header %}
{% set header_path = "~/posts" %}
{% set header_command = "cat " ~ article.slug.split('/')[-1] ~ ".md" %}
{% include "includes/header.html" %}
{% endblock %}

{% block content %}
<article class="terminal-post">
  {% include "includes/article-meta.html" %}

  <div class="markdown-content">
    {{ article.content }}
  </div>

  {% if article.prev_article or article.next_article %}
    <nav class="terminal-nav">
      <div class="nav-separator">---</div>
      {% if article.prev_article %}
        <div class="nav-item">
          <span class="nav-syntax">&lt;= </span><a href="{{ SITEURL }}/{{ article.prev_article.url }}">{{ article.prev_article.slug.split('/')[-1] }}.md</a>
        </div>
      {% endif %}
      {% if article.next_article %}
        <div class="nav-item">
          <span class="nav-syntax">=&gt; </span><a href="{{ SITEURL }}/{{ article.next_article.url }}">{{ article.next_article.slug.split('/')[-1] }}.md</a>
        </div>
      {% endif %}
    </nav>
  {% endif %}
</article>
{% endblock %}
